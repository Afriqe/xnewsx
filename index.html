<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XNewsX Aggregator</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #000000;
            color: #ffffff;
            margin: 20px;
            text-align: center;
        }
        h1 {
            color: #ff00ff;
            font-size: 2.5em;
            text-decoration: underline;
        }
        .tweet {
            border: 2px dashed #00ff00;
            padding: 15px;
            margin: 10px auto;
            max-width: 600px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        a {
            color: #ff00ff;
            text-decoration: underline;
            font-weight: bold;
            transition: color 0.3s;
        }
        a:hover {
            color: #00ff00;
        }
        .error {
            color: #ff0000;
            font-size: 1.2em;
        }
    </style>
    <link rel="icon" type="image/x-icon" href="/favicon.ico"> <!-- Optional: Add favicon -->
</head>
<body>
    <h1>XNewsX Feed</h1>
    <div id="newsFeed"></div>

    <script>
        const sampleData = {
            data: [
                { text: "Sample news tweet! Check https://example.com", created_at: "2025-03-10T12:00:00Z" },
                { text: "Another update here with https://test.com", created_at: "2025-03-10T11:00:00Z" }
            ]
        };

        // Uncommented to test with sample data
        displaySampleData(sampleData);

        function displaySampleData(data) {
            const feed = document.getElementById("newsFeed");
            data.data.forEach(tweet => {
                const tweetDiv = document.createElement("div");
                tweetDiv.className = "tweet";
                const tweetText = tweet.text.replace(
                    /(https?:\/\/[^\s]+)/g,
                    '<a href="$1" target="_blank">$1</a>'
                );
                tweetDiv.innerHTML = `<p>${tweetText}</p><small>${new Date(tweet.created_at).toLocaleString()}</small>`;
                feed.appendChild(tweetDiv);
            });
        }

        // Commented out fetch block to avoid CORS error
        // const apiUrl = "https://api.x.com/2/tweets/search/recent?query=news&tweet.fields=created_at";
        // const token = "AAAAAAAAAAAAAAAAAAAAAN1RzwEAAAAA%2Bvf7iT2dBsgBZaHw9tP1Hz%2FXkw8%3DcqEgLkMVMXDJC3BDJs77qeNt0EK1G2rkKHWPK0zUV5YQk7sQ2f";
        //
        // fetch(apiUrl, {
        //     headers: {
        //         "Authorization": `Bearer ${token}`,
        //         "Content-Type": "application/json"
        //     }
        // })
        // .then(response => {
        //     if (!response.ok) {
        //         throw new Error(`HTTP error! Status: ${response.status}`);
        //     }
        //     return response.json();
        // })
        // .then(data => {
        //     const feed = document.getElementById("newsFeed");
        //     if (data.data && data.data.length > 0) {
        //         data.data.forEach(tweet => {
        //             const tweetDiv = document.createElement("div");
        //             tweetDiv.className = "tweet";
        //             const tweetText = tweet.text.replace(
        //                 /(https?:\/\/[^\s]+)/g,
        //                 '<a href="$1" target="_blank">$1</a>'
        //             );
        //             tweetDiv.innerHTML = `<p>${tweetText}</p><small>${new Date(tweet.created_at).toLocaleString()}</small>`;
        //             feed.appendChild(tweetDiv);
        //         });
        //     } else {
        //         feed.innerHTML = "<p class='error'>No tweets found or API limit reached.</p>";
        //     }
        // })
        // .catch(error => {
        //     const feed = document.getElementById("newsFeed");
        //     feed.innerHTML = `<p class='error'>Error fetching tweets: ${error.message}. Check your Bearer Token or API access.</p>`;
        //     console.error("Fetch error details:", error);
        // });
    </script>
</body>
</html>